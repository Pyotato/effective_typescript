#  ğŸ¤¸ ITEM 15 : ë™ì  ë°ì´í„°ì— ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ ì‚¬ìš©í•˜ê¸°

ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì¥ì  ì¤‘ í•˜ë‚˜ëŠ” ë°”ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¬¸ë²•ì´ ê°„ë‹¨í•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

```ts
const rocket = {
  name: 'Falcon 9';
  variant: 'Block 5',
  thrust: '7,607 KN',
}
```

ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ëŠ” ë¬¸ìì—´ í‚¤ë¥¼ íƒ€ì…ì˜ ê°’ì— ê´€ê³„ì—†ì´ ë§¤í•‘í•©ë‹ˆë‹¤.
íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” íƒ€ì…ì— `ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜`ë¥¼ ëª…ì‹œí•˜ì—¬ ìœ ì—°í•˜ê²Œ ë§¤í•‘ì„ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type Rocket = {[property: string]: string};
const rocket = {
  name: 'Falcon 9';
  variant: 'Block 5',
  thrust: '7,607 KN',
}  // ì •ìƒ
```

`[property: string]: string`ì´ `ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜`ì´ë©°, ë‹¤ìŒ ì„¸ ê°€ì§€ ì˜ë¯¸ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.
- í‚¤ì˜ ì´ë¦„: í‚¤ì˜ ìš°ì¹˜ë§Œ í‘œì‹œí•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤. íƒ€ì… ì²´ì»¤ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” ì°¸ê³  ì •ë³´ë¼ê³  ìƒê°í•´ë„ ë©ë‹ˆë‹¤.
- í‚¤ì˜ íƒ€ì…: stringì´ë‚˜ number ë˜ëŠ” symbolì˜ ì¡°í•©ì´ì–´ì•¼ í•˜ì§€ë§Œ, ë³´í†µì€ stringì„ ì‚¬ìš©í•©ë‹ˆë‹¤([ì•„ì´í…œ 16](https://github.com/Pyotato/effective_typescript/blob/item16/README.md)).
- ê°’ì˜ íƒ€ì…: ì–´ë–¤ ê²ƒì´ë“  ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ íƒ€ì… ì²´í¬ê°€ ìˆ˜í–‰ë˜ë©´ ë„¤ê°€ì§€ ë‹¨ì ì´ ë“œëŸ¬ë‚©ë‹ˆë‹¤.

- ì˜ëª»ëœ í‚¤ë¥¼ í¬í•¨í•´ ëª¨ë“  í‚¤ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. name ëŒ€ì‹  Nameìœ¼ë¡œ ì‘ì„±í•´ë„ ìœ íš¨í•œ Rocketíƒ€ì…ì´ ë©ë‹ˆë‹¤.
- íŠ¹ì • í‚¤ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. {}ë„ ìœ íš¨í•œ Rocketíƒ€ì…ì…ë‹ˆë‹¤.
- í‚¤ë§ˆë‹¤ ë‹¤ë¥¸ íƒ€ì…ì„ ê°€ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, thrustëŠ” stringì´ ì•„ë‹ˆë¼ numberì´ì–´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ ì„œë¹„ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²½ì›¨ ë„ì›€ì´ ë˜ì§€ ëª»í•©ë‹ˆë‹¤. `name:`ì„ ì…ë ¥í•  ë•Œ, í‚¤ëŠ” ë¬´ì—‡ì´ë“  ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìë™ ì™„ì„± ê¸°ëŠ¥ì´ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê²°ë¡ ì„ ë‚´ë ¤ ë³´ê³˜ìŠµë‹ˆë‹¤.
ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ëŠ” ë¶€ì •í™•í•˜ë¯€ë¡œ ë” ë‚˜ì€ ë°©ë²•ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ë‹¹ë¯€ ê²½ìš°ì—ëŠ” Rocketì´ ì¸í„°í˜ì´ìŠ¤ì–´ì•¼ í•©ë‹ˆë‹¤. 

```ts
interface Rocket = {
  name: string;
  variant: string,
  thrust_kN: number,
};
const falconHeavy: Rocket = {
  name: 'Falcon HEavy';
  variant :'v1',
  thrust: 15_200,
}  // ì •ìƒ
```

thrust_kNì€ numberíƒ€ì…ì´ë©°, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª¨ë“  í•„ìˆ˜ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
ì´ì œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì–¸ì–´ ì„œë¹„ìŠ¤ë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
ìë™ì™„ì„±, ì •ì˜ë¡œ ì´ë™, ì´ë¦„ ë°”ê¾¸ê¸° ë“±ì´ ëª¨ë‘ ë™ì‘í•©ë‹ˆë‹¤.

ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ëŠ” ë™ì  ë°ì´í„°ë¥¼ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ëœì–´ CSVíŒŒì¼ì²˜ëŸ¼ í—¤ë” í–‰(row)ì— ì—´(column) ì´ë¦„ì´ ìˆê³ , ë°ì´í„° í–‰ì„ ì—´ ì´ë¦„ê³¼ ê°’ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ê°ì²´ë¡œ ë‚˜íƒ€ë‚´ê³  ì‹¶ì€ ê²½ìš°ì…ë‹ˆë‹¤.

```ts
function parseCSV(input:string): {[columnName:string]:string}[]{
    const lines = input.split('\n');
    const [header, ...rows] = lines;
    const headerColumns = header.split(',');
    return rows.map(rowStr=>{
        const row: {[columnName:string]:string} = {};
        rowStr.split(',').forEach((cell, i)=>{
            row[headerColumns[i]] = cell;
        });
        return row;
    })     
}
```

ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œ ì—´ ì´ë¦„ì´ ë¬´ì—‡ì¸ì§€ ë¯¸ë¦¬ ì•Œ ë°©ë²•ì€ ì—†ìŠµë‹ˆë‹¤.
ì´ëŸ´ ë•ŒëŠ” ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ë°˜ë©´ì— ì—´ ì´ë¦„ì„ ì•Œê³  ìˆëŠ” íŠ¹ì •í•œ ìƒí™©ì—ì„œ parseCSVê°€ ì‚¬ìš©ëœë‹¤ë©´, ë¯¸ë¦¬ ì„ ì–¸í•´ ë‘” íƒ€ì…ìœ¼ë¡œ ë‹¨ì–¸ë¬¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```ts
interface ProductRow{
  productId: string;
  name: string;
  price: string;
}

declare let csvData: string;
const products = parseCSV(csvData) as unknown as ProductRow[];
```

ë¬¼ë¡  ì„ ì–¸í•´ ë‘” ì—´ë“¤ì´ ëŸ°íƒ€ì„ì— ì‹¤ì œë¡œ ì¼ì¹˜í•œë‹¤ëŠ” ë³´ì¥ì€ ì—†ìŠµë‹ˆë‹¤.
ì´ ë¶€ë¶„ì´ ê±±ì •ëœë‹¤ë©´ ê°’ íƒ€ì…ì— undefinedë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
function safeParseCSV(
  input: string
):{[columnName: string]:string | undefined}[]{
  return parseCSV(input);
}
```

ì´ì œ ëª¨ë“  ì—´ì˜ undefined ì—¬ë¶€ë¥¼ ì²´í¬í•´ì•¼ í•©ë‹ˆë‹¤.

```ts
const rows = parseCSV(csvData);
const prices: {[product: string]:number} = {};
for(const row of rows){
  prices[row.productId] = Number(row.price);
}

const safeRows = safeParseCSV(csvData);
for(const row of safeRows){
  prices[row.productId] = Number(row.price);
}
```

<img width="489" alt="image" src="https://github.com/Pyotato/effective_typescript/assets/102423086/df886a98-67ac-4ba2-a5b9-82085c177c96"/>

ë¬¼ë¡  ì²´í¬ë¥¼ ì¶”ê°€í•´ì•¼ í•˜ê¸°ì— ì‘ì—…ì´ ì¡°ê¸ˆ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
undefinedë¥¼ íƒ€ì…ì— ì¶”ê°€í• ì§€ëŠ” ìƒí™©ì— ë§ê²Œ íŒë‹¨í•´ì•¼ í•©ë‹ˆë‹¤.

ì—°ê´€ ë°°ì—´(associative array)ì˜ ê²½ìš°, ê°ì²´ì— ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  Map íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŠ” í”„ë¡œí† íƒ€ì… ì²´ì¸ê³¼ ê´€ë ¨ëœ ìœ ëª…í•œ ë¬¸ì œë¥¼ ìš°íšŒí•©ë‹ˆë‹¤.
êµ¬ì²´ì ì¸ ì—ì‹œë¥¼ [ì•„ì´í…œ 58](https://github.com/Pyotato/effective_typescript/blob/item58/README.md)ì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì–´ë–¤ íƒ€ì…ì— ê°€ëŠ¥í•œ í•„ë“œê°€ ì œí•œë˜ì–´ ìˆëŠ” ê²½ìš°ë¼ë©´ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¡œ ëª¨ë¸ë§í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤.
ì—ë¥¼ ë“¤ì–´, ë°ì´í„°ì— A,B,C,Dê°™ì€ í‚¤ê°€ ìˆì§€ë§Œ, ì–¼ë§ˆë‚˜ ë§ì´ ìˆëŠ”ì§€ ëª¨ë¥¸ë‹¤ë©´ ì„ íƒì  í•„ë“œ ë˜ëŠ” ìœ ë‹ˆì˜¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë¸ë§í•˜ë©´ ë©ë‹ˆë‹¤. 

```ts
interface Row1 {[column: string]: number}  //  ë„ˆë¬´ ê´‘ë²”ìœ„
interfeace Row2 {a: number; b?:number; c?: number; d?: number}  // ìµœì„ 
type Row3 = {
  | {a: number;}
  | {a: number; b: number;}
  | {a: number; b: number; c: number;}
  | {a: number; b: number; c: number; d: number;}  // ê°€ì¥ ì •í™•í•˜ì§€ë§Œ ì‚¬ìš©í•˜ê¸° ë²ˆê±°ë¡œì›€
}
```

ë§ˆì§€ë§‰ í˜•íƒœê°€ ê°€ì¥ ì •í™•í•˜ì§€ë§Œ, ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì¡°ê¸ˆ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.

string íƒ€ì…ì´ ë„ˆë¬´ ê´‘ë²”ìœ„í•´ì„œ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë° ë¬¸ì œê°€ ìˆë‹¤ë©´, ë‘ê°€ì§€ ë‹¤ë¥¸ ëŒ€ì•ˆì„ ìƒê°í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì²«ë²ˆì§¸, Recordë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. RecordëŠ” í‚¤ íƒ€ì…ì— ìœ ì—°ì„±ì„ ì œê³µí•˜ëŠ” ì œë„ˆë¦­ íƒ€ì…ì…ë‹ˆë‹¤. 
íŠ¹íˆ, stringì˜ ë¶€ë¶„ ì§‘í•©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type Vec3D = Record< 'x' | 'y' | 'z', number>;
// type Vec3D = {
//   x: number;
//   y: number;
//   z: number;
// }
```

ë‘ ë²ˆì§¸, ë§¤í•‘ëœ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ë§¤í•‘ëœ íƒ€ì…ì€ í‚¤ë§ˆë‹¤ ë³„ë„ì˜ íƒ€ì…ì„ ì‚¬ìš©í•˜ê²Œ í•´ì¤ë‹ˆë‹¤.

```ts
type Vec3D = {[k in 'x'|'y'|'z']:number};
// type Vec3D = {
//   x: number;
//   y: number;
//   z: number;
// }

type ABC = {[k in 'a'|'b'|'c']:k extends 'b'? string: number};
// type ABC = {
//   a: number;
//   b: string;
//   c: number;
// }
```

(ì•ì˜ ì˜ˆì œë¥¼ ë³´ë©´ ì¡°ê±´ë¶€ íƒ€ì…(? ì—°ì‚°ì)ì´ ë“±ì¥í•©ë‹ˆë‹¤. ì¡°ê±´ë¶€ íƒ€ì…ì€ [ì•„ì´í…œ 50](https://github.com/Pyotato/effective_typescript/blob/item50/README.md)ì—ì„œ ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.)
